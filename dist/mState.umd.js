!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("mithril")):"function"==typeof define&&define.amd?define(["exports","mithril"],n):n(t.mState={},t.m)}(this,function(t,i){"use strict";i=i&&i.hasOwnProperty("default")?i.default:i;var u={},o={},c={};t.makeState=function(t){return Object.keys(t).reduce(function(r,i){return r[i]=new Proxy(t[i],{get:function(t,n){return t[n]},set:function(t,n,e){return t[n]!==e&&(t[n]=e,o[i].forEach(function(t){t(i,r[i])})),!0}}),r},{})},t.registerState=function(n,t){return u[n]=t,{withActions:function(t){c[n]=t}}},t.callAction=function(t,n,e){c[t][n](u[t],e)},t.inject=function(n,t){var r=null;return{oninit:function(){r=t.reduce(function(t,e){return t[e]=u[e],t[e]&&(t[e]._call=function(t,n){return c[e][t](u[e],n)}),t},{}),t.map(function(e){var t,n;n=function(t,n){r[e][t]=n,i.redraw()},(o[t=e]=o[t]||[]).push(n)})},view:function(t){return r=Object.assign({},t.attrs,r),i(n,r)}}},Object.defineProperty(t,"__esModule",{value:!0})});
